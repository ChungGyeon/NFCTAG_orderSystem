<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>태그오더 - 정통 충북대지점</title>
  <link rel="stylesheet" href="for_menu_modify.css">
</head>
<body>
  <header class="header">
    <div class="top-bar">
    </div>
    <div class="store-info">
      <!--<button class="back-btn">←</button>이거 어디쓸만하지않을까-->
      <h1>정보통신공학부 충북대 지점</h1>
      <div class="header-icons">
        <button>🔗</button>
        <button>🔍</button>
        <button>🛒</button>
      </div>
    </div>
  </header>

  <nav class="menu-tabs">
    <button>메뉴 찾기</button>
    <button class="active">추천 메뉴</button>
    <button>신메뉴</button>
    <button>bhc 세트</button>
    <button>뿌링클</button>
    <p>버튼은 아직 작동 x</p>
  </nav>

  <main class="menu-list">
    <section class="menu-item">
      <div class="menu-info">
        <% items.forEach(item => { %>
          <!--<div class="menu-container" onclick="openModal(<%= item.id %>, '<%= item.name %>', '<%= item.price %>', '<%= item.description %>')">-->
           <div class="menu-container" alt="원래 위 내용이 여기에 들어갈건데 일단 빼놓을게">
            <div class="menu-details">
            <h2><%= item.name %></h2>
            <p class="price"><%= item.price %>원</p>
            <p class="review"><%= item.description %></p>
            <form class="moding_menu_button_label" action = '/admin_addel' method="POST" onsubmit="event.preventDefault(); openConfirmModal(this);">
                    <input type="hidden" name="id" value="<%= item.id %>">
                    <button class="moding_menu_button" type="submit">삭제</button>
            </form>
          </div>
            <img class="menu-img" src="/test_img_upload/<%= item.image_url %>" alt="<%= item.name %>">
          </div>
        <% }) %>
      </div>
    </section>

   <!--삭제 확인 모달, 관련 스크립 함수(openConfirmModal, closeConfirModal, confirmDelete)-->
    <section>
        <div id="confirmModal" class="confirm-modal">
          <div class="confirm-modal-content">
            <span class="close" onclick="closeConfirmModal()">&times;</span>
            <p>정말로 삭제하겠습니까?</p>
            <button onclick="confirmDelete()">확인</button>
            <button onclick="closeConfirmModal()">취소</button>
          </div>
        </div>
    </section>

     <!--모달 관련 코드-->
      <div id="myModal" class="modal">
        <div class="modal-content">
          <span class="close" onclick="closeModal()">&times;</span>
          <h2 id="modal-menu-name"></h2>
          <p id="modal-price"></p>
          <p id="modal-description"></p>
          <div id="modal-options"></div>
          <button onclick="DoSendOrder()">주문 하기</button>
        </div>
      </div>

  </main>


  <!--모달 관련 스크립트, 나중에 js파일로 따로 빼놓을 것-->
  <script>

    /*관리자 페이지에는 일단 모달 생성, 메뉴 주문 스크립트는 일단 삭제, 아차피 수정,삭제가 주목적인데*/
    let deleteForm;

     /*삭제 확인 모달 관련 함수*/
      function openConfirmModal(form) {
        deleteForm = form;
        document.getElementById('confirmModal').style.display = 'block';
      }

      function closeConfirmModal() {
        document.getElementById('confirmModal').style.display = 'none';
      }

      function confirmDelete() {
        deleteForm.submit();
      }
</script>
</body>
</html>